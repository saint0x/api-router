<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API Router Performance Dashboard</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js" integrity="sha512-ElRFoEQdI5Ht6kZvyzXhYG9NqjtkmlkfYk0wr6wHxU9JEHakS7UJZNeml5ALk+8IKlU6jDgMabC3vkumRokgJA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <style>
        body {
            font-family: system-ui, -apple-system, sans-serif;
            line-height: 1.5;
            margin: 0;
            padding: 20px;
            background: #f5f5f5;
            color: #333;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        .card {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            padding: 20px;
            margin-bottom: 20px;
        }
        .ascii-art {
            font-family: monospace;
            white-space: pre;
            font-size: 12px;
            text-align: center;
            color: #333;
            margin: 20px 0;
        }
        h1, h2 {
            margin: 0;
            color: #333;
        }
        h1 {
            text-align: center;
            font-size: 2em;
            margin-bottom: 10px;
        }
        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 20px;
        }
        .grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
            margin: 20px 0;
        }
        @media (min-width: 768px) {
            .grid {
                grid-template-columns: 1fr 1fr;
            }
        }
        .list {
            list-style-type: disc;
            padding-left: 20px;
            margin: 10px 0;
        }
        .badge {
            display: inline-block;
            padding: 8px 16px;
            background: #e2e8f0;
            border-radius: 9999px;
            font-weight: 500;
            text-align: center;
            margin: 10px 0;
        }
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        .tab {
            padding: 8px 16px;
            background: #e2e8f0;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.2s;
        }
        .tab:hover {
            background: #cbd5e1;
        }
        .tab.active {
            background: #2563eb;
            color: white;
        }
        .chart-container {
            position: relative;
            height: 400px;
            width: 100%;
            margin: 20px 0;
        }
        .error {
            color: #dc2626;
            text-align: center;
            padding: 20px;
            background: #fee2e2;
            border-radius: 6px;
            margin: 20px 0;
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="card">
            <pre class="ascii-art">
     _____  _____ _____   _____             _            
    |  __ \|  __ \_   _| |  __ \           | |           
    | |__) | |__) || |   | |__) |___  _   _| |_ ___ _ __ 
    |  ___/|  ___/ | |   |  _  // _ \| | | | __/ _ \ '__|
    | |    | |    _| |_  | | \ \ (_) | |_| | ||  __/ |   
    |_|    |_|   |_____| |_|  \_\___/ \__,_|\__\___|_|   
            </pre>
            <h1>API Router Performance Comparison</h1>
            <p class="subtitle">Comparing high-performance API routers in Go and Rust</p>
            <div class="grid">
                <div>
                    <h2>Project Overview</h2>
                    <ul class="list">
                        <li>Developed and benchmarked two high-performance API routers</li>
                        <li>Provides crucial insights for scalable web services</li>
                        <li>Comprehensive testing with 10 concurrent connections</li>
                        <li>1000 requests per endpoint</li>
                    </ul>
                </div>
                <div>
                    <h2>Key Findings</h2>
                    <ul class="list">
                        <li>17.8% higher overall throughput in Rust</li>
                        <li>Up to 35% lower latency for data operations</li>
                        <li>50% lower memory footprint</li>
                        <li>Consistent performance across all percentiles</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="card">
            <h2>Overall Performance</h2>
            <div class="chart-container">
                <canvas id="overallChart"></canvas>
            </div>
            <div style="text-align: center;">
                <div class="badge">Rust outperforms Go by 17.8% in overall throughput</div>
            </div>
        </div>

        <div class="card">
            <h2>Detailed Metrics Comparison</h2>
            <div class="tabs">
                <button class="tab active" onclick="showEndpoint('ping')">Ping Endpoint</button>
                <button class="tab" onclick="showEndpoint('data')">Data Endpoint</button>
                <button class="tab" onclick="showEndpoint('process')">Process Endpoint</button>
            </div>
            <div class="chart-container">
                <canvas id="endpointChart"></canvas>
            </div>
        </div>

        <div class="card">
            <h2>Performance by Endpoint</h2>
            <div class="chart-container">
                <canvas id="comparisonChart"></canvas>
            </div>
        </div>

        <div class="card">
            <h2>Business Impact</h2>
            <ul class="list">
                <li>Infrastructure cost reduction through lower memory usage</li>
                <li>Higher throughput enables serving more users with fewer servers</li>
                <li>Better user experience with faster response times</li>
                <li>More predictable performance under load</li>
            </ul>
        </div>
    </div>

    <div id="error" class="error"></div>

    <script>
        const overallPerformance = [
            { metric: 'Throughput (req/s)', Go: 2117.00, Rust: 2494.39, difference: 17.8 }
        ];

        const endpointData = {
            ping: [
                { metric: 'Mean Latency (ms)', Go: 1747.35, Rust: 1679.92, difference: -3.9 },
                { metric: 'Median Latency (ms)', Go: 1787.81, Rust: 1758.71, difference: -1.6 },
                { metric: 'P95 Latency (ms)', Go: 2839.14, Rust: 2673.05, difference: -5.8 },
                { metric: 'P99 Latency (ms)', Go: 2970.45, Rust: 2744.32, difference: -7.6 },
                { metric: 'Min Latency (ms)', Go: 501.64, Rust: 475.06, difference: -5.3 },
                { metric: 'Max Latency (ms)', Go: 2981.54, Rust: 2754.45, difference: -7.6 },
                { metric: 'Memory Usage (MB)', Go: 12.41, Rust: 6.21, difference: -50.0 },
            ],
            data: [
                { metric: 'Mean Latency (ms)', Go: 2071.92, Rust: 1347.12, difference: -35.0 },
                { metric: 'Median Latency (ms)', Go: 2075.57, Rust: 1373.03, difference: -33.8 },
                { metric: 'P95 Latency (ms)', Go: 3305.88, Rust: 2116.20, difference: -36.0 },
                { metric: 'P99 Latency (ms)', Go: 3411.34, Rust: 2191.24, difference: -35.8 },
                { metric: 'Min Latency (ms)', Go: 554.21, Rust: 433.33, difference: -21.8 },
                { metric: 'Max Latency (ms)', Go: 3427.85, Rust: 2204.75, difference: -35.7 },
                { metric: 'Memory Usage (MB)', Go: 13.46, Rust: 6.98, difference: -48.1 },
            ],
            process: [
                { metric: 'Mean Latency (ms)', Go: 3232.10, Rust: 3071.32, difference: -5.0 },
                { metric: 'Median Latency (ms)', Go: 3106.42, Rust: 3097.98, difference: -0.3 },
                { metric: 'P95 Latency (ms)', Go: 5387.03, Rust: 5076.93, difference: -5.8 },
                { metric: 'P99 Latency (ms)', Go: 5580.99, Rust: 5220.85, difference: -6.5 },
                { metric: 'Min Latency (ms)', Go: 910.88, Rust: 748.67, difference: -17.8 },
                { metric: 'Max Latency (ms)', Go: 5628.19, Rust: 5268.64, difference: -6.4 },
                { metric: 'Memory Usage (MB)', Go: 13.83, Rust: 9.02, difference: -34.8 },
            ]
        };

        try {
            // Overall Performance Chart
            new Chart(document.getElementById('overallChart'), {
                type: 'bar',
                data: {
                    labels: overallPerformance.map(d => d.metric),
                    datasets: [
                        {
                            label: 'Go',
                            data: overallPerformance.map(d => d.Go),
                            backgroundColor: '#4299e1',
                        },
                        {
                            label: 'Rust',
                            data: overallPerformance.map(d => d.Rust),
                            backgroundColor: '#f56565',
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });

            // Endpoint Chart
            let endpointChart;
            function showEndpoint(endpoint) {
                document.querySelectorAll('.tab').forEach(tab => {
                    tab.classList.remove('active');
                    if (tab.textContent.toLowerCase().includes(endpoint)) {
                        tab.classList.add('active');
                    }
                });

                if (endpointChart) {
                    endpointChart.destroy();
                }

                const data = endpointData[endpoint];
                endpointChart = new Chart(document.getElementById('endpointChart'), {
                    type: 'bar',
                    data: {
                        labels: data.map(d => d.metric),
                        datasets: [
                            {
                                label: 'Go',
                                data: data.map(d => d.Go),
                                backgroundColor: '#4299e1',
                            },
                            {
                                label: 'Rust',
                                data: data.map(d => d.Rust),
                                backgroundColor: '#f56565',
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        indexAxis: 'y',
                        scales: {
                            x: {
                                beginAtZero: true
                            }
                        }
                    }
                });
            }

            // Comparison Chart
            new Chart(document.getElementById('comparisonChart'), {
                type: 'line',
                data: {
                    labels: endpointData.ping.map(d => d.metric),
                    datasets: [
                        {
                            label: 'Go - Ping',
                            data: endpointData.ping.map(d => d.Go),
                            borderColor: '#4299e1',
                            fill: false
                        },
                        {
                            label: 'Rust - Ping',
                            data: endpointData.ping.map(d => d.Rust),
                            borderColor: '#f56565',
                            fill: false
                        },
                        {
                            label: 'Go - Data',
                            data: endpointData.data.map(d => d.Go),
                            borderColor: '#4299e1',
                            borderDash: [5, 5],
                            fill: false
                        },
                        {
                            label: 'Rust - Data',
                            data: endpointData.data.map(d => d.Rust),
                            borderColor: '#f56565',
                            borderDash: [5, 5],
                            fill: false
                        },
                        {
                            label: 'Go - Process',
                            data: endpointData.process.map(d => d.Go),
                            borderColor: '#4299e1',
                            borderDash: [3, 3],
                            fill: false
                        },
                        {
                            label: 'Rust - Process',
                            data: endpointData.process.map(d => d.Rust),
                            borderColor: '#f56565',
                            borderDash: [3, 3],
                            fill: false
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });

            // Initialize the endpoint chart with ping data
            showEndpoint('ping');
        } catch (error) {
            console.error('Error initializing charts:', error);
            document.getElementById('error').style.display = 'block';
            document.getElementById('error').textContent = 'Error loading charts: ' + error.message;
        }
    </script>
</body>
</html>
